(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{1194:function(e,i,n){"use strict";n(958)},1195:function(e,i,n){(i=n(25)(!1)).push([e.i,"[data-v-3bc7ee00]:root {\n/**\n   * Height of the Mobile App Bar\n   */\n  --mobile-bar-height: calc(50px + env(safe-area-inset-bottom));\n}\n.mobile-bar[data-v-3bc7ee00] {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: justify;\n  justify-content: space-between;\n  -ms-flex-align: center;\n  align-items: center;\n  position: relative;\n  background-color: #fff;\n  border-top: 1px solid rgba(0,0,0,0.1);\n  padding: 0 24px env(safe-area-inset-bottom);\n  height: var(--mobile-bar-height);\n}\n.mobile-bar__link[data-v-3bc7ee00] {\n  display: -ms-flexbox;\n  display: flex;\n  position: relative;\n}\n.mobile-bar__messenger[data-v-3bc7ee00] .navigation-messenger__placeholder {\n  padding: 0;\n}\n.mobile-bar__messenger[data-v-3bc7ee00] .messenger-panel + .messenger-panel {\n  display: none;\n}\n.mobile-bar__feed--is-active[data-v-3bc7ee00],\n.mobile-bar__vacancies--is-active[data-v-3bc7ee00],\n.mobile-bar__messenger--is-active[data-v-3bc7ee00],\n.mobile-bar__notifications--is-active[data-v-3bc7ee00] {\n  color: #e5a040;\n}\n.mobile-bar__profile[data-v-3bc7ee00] .navigation-user-profile__avatar-image {\n  --size: 28px;\n  --image-radius: 50%;\n}\n.mobile-bar__profile--is-active[data-v-3bc7ee00] .navigation-user-profile__avatar-image {\n  border: 3px solid #e5a040;\n  -webkit-box-shadow: inset 0 0 0 1px #fff;\n  box-shadow: inset 0 0 0 1px #fff;\n}\n.mobile-bar__badge[data-v-3bc7ee00] {\n  display: inline-block;\n  background-color: #e62e3b;\n  color: #fff;\n  border-radius: 4px;\n  font-size: 12px;\n  min-width: 12px;\n  padding: 3px 5px;\n  position: absolute;\n  left: 50%;\n  top: -6px;\n  line-height: 1em;\n  -webkit-font-smoothing: antialiased;\n  will-change: transform;\n  visibility: visible;\n  -webkit-transform: scale(1) translate3d(0, 0, 0);\n  transform: scale(1) translate3d(0, 0, 0);\n  opacity: 1;\n  -webkit-transition: all 170ms ease, opacity 170ms ease, visibility 0ms 170ms;\n  transition: all 170ms ease, opacity 170ms ease, visibility 0ms 170ms;\n}\n",""]),e.exports=i},223:function(e,i,n){"use strict";n.r(i);var t=function(){var e=this,i=e.$createElement,n=e._self._c||i;return n("div",{ref:"mobileBar",staticClass:"mobile-bar"},[e._l(e.links,(function(i){var t;return[i.isVisible?n("div",{key:i.class,class:[i.class,(t={},t[i.class+"--is-active"]=i.isActive,t)]},[n("div",{staticClass:"mobile-bar__link",attrs:{href:i.href},on:{click:function(n){return e.tabClicked(i)}}},[n("icon",{staticClass:"mobile-bar__icon",attrs:{name:i.icon,width:28,height:28}}),e._v(" "),i.counter?n("span",{staticClass:"mobile-bar__badge"},[e._v("\n          "+e._s(i.counter)+"\n        ")]):e._e()],1)]):e._e()]})),e._v(" "),n("div",{class:["mobile-bar__profile",{"mobile-bar__profile--is-active":e.isActiveProfile}]},[n("navigation-user",{attrs:{"is-panel-on-top":!0,"account-metrics":["Mobile Bar","Account","Click"],"signup-metrics":["Mobile Bar","Signup","Click"]}})],1)],2)};t._withStripped=!0;var a=n(10),s=n.n(a),o=n(9),r=n(27),l=n(11),c=n(921);const d={feed:["/","/popular","/new","/my"],vacancies:"/job",messenger:"/m",notifications:"/notifications",profile:"/u"};var u=s.a.extend({name:"mobile-bar",components:{Icon:r.a,NavigationUser:c.a},data:()=>({moduleAjaxify:window.Air.import("module.ajaxify"),moduleAuthData:window.Air.import("module.auth_data"),moduleAuth:window.Air.import("module.auth"),moduleMessenger:window.Air.import("module.messenger"),pathname:document.location.pathname,userData:null,counters:{messenger:0,notifications:0},previousPageUrl:""}),computed:{links(){return[{class:"mobile-bar__feed",isVisible:!0,href:"/",metrics:["Mobile Bar","Home","Click"],icon:"v_home",isActive:d.feed.some(e=>e===this.pathname)},{class:"mobile-bar__vacancies",isVisible:this.hasVacancies,href:d.vacancies,metrics:["Mobile Bar","Job","Click"],icon:"v_job",isActive:d.vacancies===this.pathname},{class:"mobile-bar__messenger",isAuthRequired:!0,isVisible:!0,href:this.userData?d.messenger:"",metrics:["Mobile Bar","Messenger","Click"],icon:"v_messenger",isActive:d.messenger===this.pathname,counter:this.counters.messenger},{class:"mobile-bar__notifications",isAuthRequired:!0,isVisible:!0,href:this.userData?d.notifications:"",metrics:["Mobile Bar","Bell","Click"],icon:"v_bell",isActive:d.notifications===this.pathname,counter:this.counters.notifications}]},hasVacancies:()=>!1,isActiveProfile(){return!!this.userData&&this.pathname.indexOf(`${d.profile}/${this.userData.id}`)>=0}},created(){this.moduleAjaxify.on("Before page changed",()=>{this.pathname=document.location.pathname}),this.moduleAuthData.on("Change",e=>{this.userData=e,this.userData&&(this.counters.notifications=this.userData.notifications.count)}),this.moduleAuthData.on("User notifications changed",e=>{if(e.counter)this.counters.notifications=e.counter;else switch(e.action){case"added":this.counters.notifications+=1;break;case"cleared":this.counters.notifications=0}}),this.moduleMessenger.on("Change unread count",e=>{this.counters.messenger=e}),o.g&&this.sendEventToAnalytics(["Mobile Bar","Bar","Show"])},methods:{sendEventToAnalytics(e){Object(l.send)(e)},tabClicked(e){if(e.isAuthRequired&&!this.userData)this.showAuth();else{let i=e.href;"/"===i?i=this.restoreNavigationUrlIfNeeded(i):this.saveNavigationIfNeeded(),this.moduleAjaxify.goTo(""+i,{shouldRestoreScrollForTheUrl:!0})}e.metrics&&e.metrics.length&&this.sendEventToAnalytics(e.metrics)},saveNavigationIfNeeded(){!1===[d.messenger,d.profile,d.vacancies,d.notifications].includes(this.pathname)&&(this.previousPageUrl=this.pathname)},restoreNavigationUrlIfNeeded(e){if(!this.previousPageUrl)return e;return this.previousPageUrl===this.pathname?e:this.previousPageUrl},showAuth(){this.moduleAuth.showAuth({callback:e=>{e&&(this.moduleAuthData.get().forceReload?this.moduleAjaxify.hardReload():this.moduleAjaxify.reload())}})}}}),h=(n(1194),n(14)),p=Object(h.a)(u,t,[],!1,null,"3bc7ee00",null);p.options.__file="src/Components/MainMenu/vue/mobile-bar/chunk.mobile-bar.vue";i.default=p.exports},736:function(e,i,n){var t=n(862);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);(0,n(26).default)("6c579d2e",t,!1,{})},861:function(e,i,n){"use strict";n(736)},862:function(e,i,n){(i=n(25)(!1)).push([e.i,":root {\n/**\n   * Height of the Mobile App Bar\n   */\n  --mobile-bar-height: calc(50px + env(safe-area-inset-bottom));\n}\n.navigation-user {\n  --offset-right: 15px;\n  --offset-left: 12px;\n  display: -ms-flexbox;\n  display: flex;\n  font-weight: 500;\n}\n@media (min-width: 720px) {\n.navigation-user {\n    --offset-right: 20px;\n}\n}\n@media (min-width: 860px) {\n.navigation-user {\n    --offset-right: 40px;\n}\n}\n@media (max-width: 719px) {\n.navigation-user {\n    --offset-left: 8px;\n}\n}\n.navigation-user .bubble {\n  top: 100%;\n  right: 24px;\n  margin-top: 0;\n  cursor: default;\n  font-weight: 400;\n}\n@media (max-width: 719px) {\n.navigation-user .bubble {\n    right: 10px;\n}\n}\n.navigation-user--top-position .bubble {\n  top: initial;\n  bottom: calc(100% + 13px);\n}\n.navigation-user-login {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  padding-left: var(--offset-left);\n  padding-right: var(--offset-right);\n  cursor: pointer;\n}\n@media (max-width: 719px) {\n.navigation-user-login {\n    --offset-left: 8px;\n}\n}\n.navigation-user-login:hover {\n  color: #e5a040;\n}\n@media (max-width: 719px) {\n.navigation-user-login__label {\n    display: none;\n}\n}\n.navigation-user-login .icon {\n  margin-right: 8px;\n}\n@media (max-width: 719px) {\n.navigation-user-login .icon {\n    margin-right: 0;\n}\n}\n.navigation-user-profile {\n  display: -ms-flexbox;\n  display: flex;\n  position: relative;\n}\n.navigation-user-profile__avatar {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  padding-left: var(--offset-left);\n}\n@media (max-width: 719px) {\n.navigation-user-profile__avatar {\n    padding: 0;\n}\n}\n.navigation-user-profile__avatar:hover .navigation-user-profile__avatar-image {\n  opacity: 0.9;\n}\n.navigation-user-profile__avatar-image {\n  --size: 40px;\n  --image-radius: 7px;\n  width: var(--size);\n  height: var(--size);\n  background-color: #dedede;\n  border-radius: var(--image-radius);\n  -webkit-box-shadow: inset 0 0 0 1px rgba(0,0,0,0.1);\n  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.1);\n  background-position: 50% 50%;\n  background-repeat: no-repeat;\n  background-size: cover;\n}\n@media (max-width: 719px) {\n.navigation-user-profile__avatar-image {\n    --size: 32px;\n    --image-radius: 6px;\n}\n}\n.navigation-user-profile__toggle {\n  padding-left: 12px;\n  padding-right: var(--offset-right);\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  cursor: pointer;\n}\n@media (max-width: 719px) {\n.navigation-user-profile__toggle {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    padding: 0;\n}\n.navigation-user-profile__toggle .icon {\n    display: none;\n}\n}\n.navigation-user-profile__toggle:hover {\n  opacity: 0.6;\n}\n",""]),e.exports=i},921:function(e,i,n){"use strict";var t=function(){var e=this,i=e.$createElement,n=e._self._c||i;return n("div",{class:["navigation-user",{"navigation-user--top-position":e.isPanelOnTop}],attrs:{"data-ignore-outside-click":""}},[e.userData?n("div",{staticClass:"navigation-user-profile"},[n("a",{staticClass:"navigation-user-profile__avatar",attrs:{href:"/u/"+e.userData.id}},[n("div",{staticClass:"navigation-user-profile__avatar-image",style:{"background-image":"url('"+e.getImageUrl(e.userData.avatar_url,40)+"')"}})]),e._v(" "),n("div",{staticClass:"navigation-user-profile__toggle",on:{click:function(i){return i.target!==i.currentTarget?null:e.onUserClick.apply(null,arguments)}}},[n("icon",{attrs:{name:"v_chevron_down",width:20,height:20}})],1)]):n("div",{staticClass:"navigation-user-login",on:{click:e.onLoginClick}},[n("icon",{attrs:{name:"v_login",width:28,height:28}}),e._v(" "),n("span",{staticClass:"navigation-user-login__label"},[n("translate",[e._v("\n        Log in\n      ")])],1)],1),e._v(" "),n("div",{ref:"dropdown",staticClass:"navigation-user__dropdown"})])};t._withStripped=!0;var a=n(27),s=n(8),o=n(76),r=n(11);var l={name:"navigation-user",components:{Icon:a.a},props:{isPanelOnTop:{type:Boolean,default:!1},accountMetrics:{type:Array,default:()=>[]},signupMetrics:{type:Array,default:()=>[]}},data:()=>({moduleAuth:null,moduleAuthData:null,moduleAjaxify:null,dropdown:null,userData:null}),created(){this.moduleAuth=Air.import("module.auth"),this.moduleAuthData=Air.import("module.auth_data"),this.moduleAjaxify=Air.import("module.ajaxify")},async mounted(){await this.$nextTick(),this.moduleAuthData.on("Change",e=>{this.userData=e}),this.dropdown=new o.a({container:this.$refs.dropdown,options:{fontSize:14,bubble:{title:this.$gettext("Profile"),arrowAlignment:(this.isPanelOnTop?"bottom":"top")+" right",width:200},search:{ajax:{url:"/dropdownmenu/get",isSearchOnFirstOpen:!0},showIfMoreItemsAvailable:!0},list:{type:"image+text",items:[],maxVisibleItems:7}}}),this.dropdown.on("select",e=>{const{id:i,permanent:n}=e;n&&999999904===i&&this.moduleAuth.logout(),n||i===this.userData.id||this.moduleAuth.possess(i).then(()=>{this.dropdown.setItems()})}),this.$root.$on("updateUser",()=>{this.dropdown.setItems()})},beforeDestroy(){this.$root.$off(),this.dropdown&&(this.dropdown.destroy(),this.dropdown=null)},methods:{getImageUrl:(e,i)=>Object(s.formImageUrl)(e,i),onLoginClick(){this.moduleAuth.showAuth({callback:e=>{e&&(this.moduleAuthData.get().forceReload?this.moduleAjaxify.hardReload():this.moduleAjaxify.reload())}}),this.signupMetrics.length&&Object(r.send)(this.signupMetrics)},onUserClick(){this.toggleUserDropdown()},toggleUserDropdown(){this.dropdown&&(!this.accountMetrics.length||this.dropdown.instance&&!1!==this.dropdown.instance.isVisible()||Object(r.send)(this.accountMetrics),this.dropdown.toggle())}}},c=(n(861),n(14)),d=Object(c.a)(l,t,[],!1,null,null,null);d.options.__file="src/Components/MainMenu/vue/navigation-user.vue";i.a=d.exports},958:function(e,i,n){var t=n(1195);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);(0,n(26).default)("1da8317e",t,!1,{})}}]);